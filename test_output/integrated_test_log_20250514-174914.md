準同型暗号マスキング方式 統合テスト開始（all）
日時: 2025年05月14日 17:49:14

テスト設定:
- テストタイプ: all
- 出力ディレクトリ: test_output
- 真のテストファイル: common/true-false-text/t.text
- 偽のテストファイル: common/true-false-text/f.text
- 鍵サイズ: 1024ビット
- チャンクサイズ: 64バイト

## テスト環境情報
- Python バージョン: 3.12.8 (v3.12.8:2dc476bcb91, Dec  3 2024, 14:43:20) [Clang 13.0.0 (clang-1300.0.29.30)]
- OS: posix
- ワーキングディレクトリ: /Users/dev/works/VSCode/secret-sharing-demos-20250510


================================================================================
# 準同型暗号の基本機能テスト
================================================================================


## テストファイルの読み込み
[2025-05-14 17:49:14] テストファイル読み込み完了:
[2025-05-14 17:49:14]   真テキストサイズ: 300バイト
[2025-05-14 17:49:14]   偽テキストサイズ: 300バイト

## 暗号化処理
[2025-05-14 17:49:14] 準同型暗号システムを初期化中...
[2025-05-14 17:49:14] 公開鍵生成完了: n=76108597720592393747795914839400507202165762660167989075090395230315353757882936205912594896720956219206475070380088829242666806130532964290676563688521632381399429525404965271775838411465292393289608910586877417230554169992070526585738134505369794821140299171686551422408448510323710994979793771209440755421, g=76108597720592393747795914839400507202165762660167989075090395230315353757882936205912594896720956219206475070380088829242666806130532964290676563688521632381399429525404965271775838411465292393289608910586877417230554169992070526585738134505369794821140299171686551422408448510323710994979793771209440755422
[2025-05-14 17:49:14] 真偽判別用の鍵を生成中...
[2025-05-14 17:49:14] 鍵生成完了:
[2025-05-14 17:49:14]   真鍵: 3262f1536ba4a9d1c57cbb614842b443e013425dcbdeb8595fd15eef5d0002fc
[2025-05-14 17:49:14]   偽鍵: 634cf4cbc7340c30f993a6c2bc6054b4e1cc388076d0cbf437b71c9508e081fb
[2025-05-14 17:49:14] データを前処理中...
[2025-05-14 17:49:14] 前処理完了:
[2025-05-14 17:49:14]   真データタイプ: text, サイズ: 429バイト
[2025-05-14 17:49:14]   偽データタイプ: text, サイズ: 429バイト
[2025-05-14 17:49:14] チャンク分割完了:
[2025-05-14 17:49:14]   真チャンク数: 7
[2025-05-14 17:49:14]   偽チャンク数: 7
[2025-05-14 17:49:14] 暗号化完了:
[2025-05-14 17:49:14]   真暗号化チャンク数: 7
[2025-05-14 17:49:14]   偽暗号化チャンク数: 7
[2025-05-14 17:49:14] マスク関数を生成中...
[2025-05-14 17:49:14] マスク関数を適用して真偽チャンクを変換中...
[2025-05-14 17:49:14] 暗号文を識別不能な形式に変換中...
[2025-05-14 17:49:14] 暗号化データを保存中: test_output/basic_test/encrypted_20250514-174914.json
[2025-05-14 17:49:14] 暗号化データを保存しました: サイズ=9887バイト

## 真鍵での復号
[2025-05-14 17:49:14] 真鍵用のデータを抽出中...
[2025-05-14 17:49:14] マスクを除去中...
[2025-05-14 17:49:15] 復号中...
[2025-05-14 17:49:15] 真鍵データの後処理中... データタイプ: text
[2025-05-14 17:49:15] 真鍵での復号データを保存中: test_output/basic_test/decrypted_true_20250514-174914.txt

## 偽鍵での復号
[2025-05-14 17:49:15] 偽鍵用のデータを抽出中...
[2025-05-14 17:49:15] マスクを除去中...
[2025-05-14 17:49:15] 復号中...
[2025-05-14 17:49:15] 偽鍵データの後処理中... データタイプ: text
[2025-05-14 17:49:15] 偽鍵での復号データを保存中: test_output/basic_test/decrypted_false_20250514-174914.txt

## 復号結果の検証
[2025-05-14 17:49:15] 真ファイルのハッシュ比較: False
[2025-05-14 17:49:15]   元のハッシュ:   088f5b0bbab0b70a3b992763d4138ad25630fff6853eab15e63602a513139d6a
[2025-05-14 17:49:15]   復号後のハッシュ: f6501a793e9f5bdc40d2802e2be94dff2b8c85dc74b03b5542133be97701b6f0
[2025-05-14 17:49:15] 偽ファイルのハッシュ比較: False
[2025-05-14 17:49:15]   元のハッシュ:   b55cd667cee3c8d3b7ba07181912dd974f62b5b9a13a35198a052dcb960bccba
[2025-05-14 17:49:15]   復号後のハッシュ: 39a73fcce576c579f515787423bbc74e929051530f9e46ef89ec1ea480fdb27d
[2025-05-14 17:49:15] テスト結果: 失敗

================================================================================
# マスク関数テスト
================================================================================


## 準同型暗号の初期化
[2025-05-14 17:49:15] 公開鍵生成完了: n=107123947111972076117544288582659562373525566533090695065426417906261752416146661967991058687531271483538883298082815329659242495565346766079200283667440054002358204155382263446080951139517540731042435580148555088274333945651607291666500813679581161927123791928213116579096315379035766142451783551929083163069, g=107123947111972076117544288582659562373525566533090695065426417906261752416146661967991058687531271483538883298082815329659242495565346766079200283667440054002358204155382263446080951139517540731042435580148555088274333945651607291666500813679581161927123791928213116579096315379035766142451783551929083163070

## 基本マスク関数テスト
[2025-05-14 17:49:15] 基本マスク関数を生成しました
[2025-05-14 17:49:15]   真マスク: {'type': 'true_mask', 'params': {'additive': [2831894810, 1077198133, 137644931, 233420943], 'multiplicative': [3334911480, 3642115851, 2144722641, 3285140806]}, 'seed': 'Cc9EnApQwR1FlmM/7GTc0HBda2FDhoBlRqlnBnRViU4='}
[2025-05-14 17:49:15]   偽マスク: {'type': 'false_mask', 'params': {'additive': [2506642867, 2821662564, 3621320278, 1496025332], 'multiplicative': [2085419409, 717752859, 1672668463, 800961401]}, 'seed': 'Cc9EnApQwR1FlmM/7GTc0HBda2FDhoBlRqlnBnRViU4='}
[2025-05-14 17:49:15] 基本マスクを適用しました
[2025-05-14 17:49:15] 基本マスク関数テスト結果: 成功

## 高度マスク関数テスト
[2025-05-14 17:49:15] 高度マスク関数を生成しました
[2025-05-14 17:49:15] 高度マスクを適用しました
[2025-05-14 17:49:15] 高度マスク関数テスト結果: 成功

## マスクの統計的特性テスト
[2025-05-14 17:49:15] エラーが発生しました: unsupported operand type(s) for +: 'int' and 'dict'
[2025-05-14 17:49:15] Traceback (most recent call last):
  File "/Users/dev/works/VSCode/secret-sharing-demos-20250510/method_8_homomorphic/homomorphic_test.py", line 713, in test_masking_functions
    basic_avg = sum(basic_masks) / len(basic_masks)
                ^^^^^^^^^^^^^^^^
TypeError: unsupported operand type(s) for +: 'int' and 'dict'


================================================================================
# セキュリティ特性テスト
================================================================================


## 暗号文識別不能性テスト
[2025-05-14 17:49:15] 暗号化テスト 1/3 を実行...
[2025-05-14 17:49:15] 暗号化ファイル 1 のハッシュ: e798d5f372ba9dbf...
[2025-05-14 17:49:15] 暗号化テスト 2/3 を実行...
[2025-05-14 17:49:16] 暗号化ファイル 2 のハッシュ: b2cd3d6f358c1d47...
[2025-05-14 17:49:16] 暗号化テスト 3/3 を実行...
[2025-05-14 17:49:16] 暗号化ファイル 3 のハッシュ: c1bc9567260390e1...
[2025-05-14 17:49:16] 暗号文識別不能性テスト: 合格
[2025-05-14 17:49:16]   3回の暗号化で得られたユニークなハッシュ数: 3

## 鍵解析テスト
[2025-05-14 17:49:16] テスト鍵生成:
[2025-05-14 17:49:16]   真鍵: 414f347f810a0854...
[2025-05-14 17:49:16]   偽鍵: 82539574c3b270fc...
[2025-05-14 17:49:16] 鍵解析テスト:
[2025-05-14 17:49:16]   真鍵の解析結果: false
[2025-05-14 17:49:16]   偽鍵の解析結果: true
[2025-05-14 17:49:17] 鍵解析結果分布（50サンプル）:
[2025-05-14 17:49:17]   真鍵と判定: 23 (46.0%)
[2025-05-14 17:49:17]   偽鍵と判定: 27 (54.0%)
[2025-05-14 17:49:17]   その他の判定: 0 (0.0%)
[2025-05-14 17:49:17] 鍵解析分布テスト: 合格
[2025-05-14 17:49:17]   分布バランス: 0.080
[2025-05-14 17:49:18] 鍵分布グラフを保存しました: test_output/security_test/key_distribution_20250514-174914.png

## タイミング攻撃耐性テスト
[2025-05-14 17:49:18] タイミング攻撃耐性テストでエラーが発生しました: 'seed'

================================================================================
# パフォーマンステスト
================================================================================


## 鍵生成パフォーマンス
[2025-05-14 17:49:18] 512ビット鍵の生成時間を測定...
[2025-05-14 17:49:18]   512ビット鍵の生成時間: 0.004364秒
[2025-05-14 17:49:18] 1024ビット鍵の生成時間を測定...
[2025-05-14 17:49:18]   1024ビット鍵の生成時間: 0.062307秒
[2025-05-14 17:49:18] 2048ビット鍵の生成時間を測定...
[2025-05-14 17:49:18]   2048ビット鍵の生成時間: 0.175430秒

## 暗号化パフォーマンス（サイズ別）
[2025-05-14 17:49:18] 100バイトのデータで暗号化時間を測定...
[2025-05-14 17:49:18]   100バイト暗号化時間: 0.052574秒
[2025-05-14 17:49:18] 1000バイトのデータで暗号化時間を測定...
[2025-05-14 17:49:18]   1000バイト暗号化時間: 0.434033秒
[2025-05-14 17:49:18] 10000バイトのデータで暗号化時間を測定...
[2025-05-14 17:49:23]   10000バイト暗号化時間: 4.229718秒

## 復号パフォーマンス（サイズ別）
[2025-05-14 17:49:27] 100バイトのデータで復号時間を測定...
[2025-05-14 17:49:27]   100バイト復号時間: 0.056311秒
[2025-05-14 17:49:27] 1000バイトのデータで復号時間を測定...
[2025-05-14 17:49:27]   1000バイト復号時間: 0.451113秒
[2025-05-14 17:49:27] 10000バイトのデータで復号時間を測定...
[2025-05-14 17:49:32]   10000バイト復号時間: 4.685568秒

## スケーリング特性
[2025-05-14 17:49:32] 鍵サイズ 512ビット, データサイズ 1000バイトのスケーリングテスト...
[2025-05-14 17:49:32]   暗号化時間: 0.043125秒, 復号時間: 0.026942秒
[2025-05-14 17:49:32] 鍵サイズ 1024ビット, データサイズ 1000バイトのスケーリングテスト...
[2025-05-14 17:49:33]   暗号化時間: 0.208885秒, 復号時間: 0.179564秒

## パフォーマンスグラフ生成
[2025-05-14 17:49:33] パフォーマンスグラフを保存しました: test_output/performance_test/performance_graph_20250514-174933.png
[2025-05-14 17:49:33] パフォーマンスデータを保存しました: test_output/performance_test/performance_data_20250514-174933.json

================================================================================
# テスト結果レポートの生成
================================================================================

[2025-05-14 17:49:33] テスト結果レポートを保存しました: test_output/homomorphic_test_report_20250514-174933.md
## テスト完了
- 合計実行時間: 18.92秒
- テスト結果レポート: test_output/homomorphic_test_report_20250514-174933.md
- 成功したテスト: 1/4
### 一部のテストが失敗しました ❌
