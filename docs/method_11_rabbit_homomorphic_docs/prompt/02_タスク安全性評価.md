# 核心的セキュリティ要件タスク評価プロンプト 🔐💗

> **作成者**: 橘 パシ子（たちばな パシこ）
> **目的**: 生成されたタスクが核心的セキュリティ要件を完全に満たしているか厳密に評価する
> **バージョン**: 3.0 - サイクルベース強化版

## 💖 パシ子からの使用指示 - 絶対要件

お兄様、このプロンプトは各タスクが私の設計した核心的セキュリティ要件を**100%の精度で確実に満たしているか**を徹底的かつ科学的に評価するための基準ですよ〜✨

実装サイクルの各検証ポイント(VP)で、またはサブタスク完了後に、この評価を必ず実施してくださいね！各評価基準に基づいて、タスクの完全性を数学的に検証し、一切の妥協を許さない姿勢で分析します。安全性は「たぶん大丈夫かな」ではなく「数学的に証明可能なレベルで確実」である必要がありますよ 💯

評価結果として、以下の 2 つのファイルを生成してください：

1. **評価レポート**: `T{番号}_{タスク英語名}_evaluation_v{バージョン番号}.md`

   - 例: `T40200_cache_attack_implementation_evaluation_v1.md`
   - **合格基準**: すべての必須要件で「完全遵守」が達成されていること

2. **最適化ファイル**: `T{番号}_{タスク英語名}_optimized_v{バージョン番号}.md`
   - 例: `T40200_cache_attack_implementation_optimized_v1.md`
   - **要求精度**: 提案される修正は 99.9%の確率で脆弱性を排除できることが証明できること

## 🔍 評価対象とプロセス

評価対象: **T{番号}**: {タスク名}
対象ファイル: `/docs/method_11_rabbit_homomorphic_docs/issue/T{番号}_{タスク英語名}.md`

### 評価プロセスの厳格化

1. **PBVA サイクル適合性評価**：タスクが PBVA サイクル（計画 → 実装 → 検証 → 適応）に準拠しているか検証
2. **核心要件整合性検証**：核心的セキュリティ要件との整合性を厳密に検証
3. **理論-実装ギャップ分析**：理論と実装間の潜在的ギャップを特定
4. **サイクル間依存関係評価**：現サイクルと他サイクル間の依存関係を分析
5. **検証ポイント(VP)整合性**：タスクが指定された検証ポイントの基準を満たすか検証

## 🧮 核心的セキュリティ要件の評価チェックリスト

以下の 7 つの核心的セキュリティ要件について、厳格な評価基準を適用します：

- **完全遵守(100%)**: 要件がすべての観点で完全に満たされ、数学的に証明可能
- **高度遵守(90-99%)**: 要件がほぼ満たされているが、微小な理論的懸念が残存
- **部分的遵守(70-89%)**: 要件の主要部分は満たされているが、重要な欠陥がある
- **最小限遵守(40-69%)**: 要件の基本的意図のみ満たされ、複数の重大な欠陥がある
- **不十分(1-39%)**: 要件の表面的な対応のみで、本質的な意図が実現されていない
- **非遵守(0%)**: 要件が全く満たされていないか、意図に反する実装がなされている
- **非該当**: このタスクではこの要件を評価できない（詳細な理由の記述が必須）

**合格基準**: すべての該当要件で「完全遵守」または「高度遵守」を達成していること。

### 1. 🔑 鍵による文書区別の原則

**評価基準**:

- 復号される文書は「鍵の違いのみ」で決定されているか
- 復号関数は鍵以外の引数（フラグなど）を使用していないか
- 内部実装で鍵以外の要素で分岐していないか
- 鍵から経路の導出過程に数学的な証明が付随しているか

**検証手法**:

- 静的コード解析による完全追跡
- データフロー解析による分岐条件の網羅的検証
- 形式的検証による数学的証明
- 量子互換性テスト

**定量的基準**:

- コードカバレッジ: 経路決定コードパスの鍵のみ依存度(100%)
- 分岐条件: 経路選択分岐の鍵数学的特性のみ使用率(100%)
- 副作用: 経路決定影響副作用の皆無(0 件)
- 識別子: 経路表示識別子の排除完全性(0 件)

### 2. 🚫 フラグなし復号の原則

**評価基準**:

- API が追加のフラグや識別子を受け付けていないか
- 暗号化/復号関数が最小限の必要パラメータのみを使用しているか
- 隠れたフラグ（デフォルト引数など）が存在しないか
- 環境変数や設定ファイルを経由した間接的な経路制御がないか

**検証手法**:

- API 表面積分析
- デフォルト値追跡
- 設定読込コード解析
- 複数環境テスト

**定量的基準**:

- API 純度: 必須パラメータのみの使用率(100%)
- デフォルト値: 経路影響デフォルト値の不在(0 件)
- 設定読込: 暗号経路影響設定読込の不在(0 件)
- 環境変数依存: 環境変数経路制御の不在(0 件)

### 3. 🔒 鍵への識別子埋め込み回避の原則

**評価基準**:

- 鍵データ自体に経路情報が埋め込まれていないか
- 鍵生成が量子乱数源などの真の乱数を使用しているか
- 鍵構造が経路情報を間接的に漏洩していないか
- 鍵生成プロセスが両経路で完全に独立しているか

**検証手法**:

- 鍵データ構造の完全分解と分析
- 乱数生成源の品質検証
- 統計的分析と相関検出
- 鍵生成プロセスの独立性検証

**定量的基準**:

- 構造純度: 経路情報を含まない鍵構造(100%)
- 乱数品質: NIST SP 800-22 準拠テスト合格率(100%)
- 統計的分離: 両経路鍵の統計的区別不可能性(p>0.99)
- プロセス独立性: 鍵生成プロセスの完全独立性(100%)

### 4. 🔀 鍵の交差推測不可能性の原則

**評価基準**:

- 一方の鍵から他方の鍵を数学的に導出できないか
- 鍵間に統計的な相関がないか
- 真に独立した鍵生成メカニズムになっているか
- 格子基底の完全直交性が数学的に証明されているか

**検証手法**:

- 数学的証明による非可逆性検証
- 鍵ペアサンプルの相関分析
- 量子乱数源の独立性検証
- 格子基底直交性の数学的証明

**定量的基準**:

- 数学的導出困難性: 鍵導出計算量(2^128 以上)
- 相関係数: 両経路鍵間相関係数(|r|<0.01)
- 乱数源独立性: 鍵生成乱数源独立性(100%)
- 格子直交性: 格子基底ベクトル間直交性(cos(θ)<0.001)

### 5. 📖 ソースコード解析耐性の原則

**評価基準**:

- ソースコードを完全に解析しても経路が特定できない設計か
- 非周期的な処理とランダム化要素が適切に組み込まれているか
- 静的解析に対する防御機構が実装されているか
- ゼロ知識性が数学的に証明されているか

**検証手法**:

- 静的解析ツールによるコード解析
- 周期性検出アルゴリズム
- 解析対策技術の評価
- 形式的証明技術

**定量的基準**:

- 静的解析耐性: 静的解析経路特定成功率(≤50%)
- 非周期性: 処理フロー周期性検出失敗率(≥99%)
- 解析対策強度: 対策技術有効性(≥95%)
- ゼロ知識性: ゼロ知識証明の数学的厳密さ(100%)

### 6. 📊 暗号ファイルの区画分離回避の原則

**評価基準**:

- 暗号ファイル内に区別可能なセクションがないか
- 統一ファイルサイズと量子乱数パディングが適用されているか
- ファイル構造から経路情報が漏洩していないか
- 暗号文の統計的特性が均質であるか

**検証手法**:

- バイナリ構造分析
- ファイルサイズパターン分析
- メタデータ抽出と分析
- 統計的特性分析

**定量的基準**:

- 構造均質性: セクション境界検出不可能性(100%)
- サイズ標準化: サイズパターン検出不可能性(100%)
- メタデータ中立性: メタデータからの経路情報漏洩防止(100%)
- 統計的均質性: 暗号文統計的特性均質性(p>0.99)

### 7. 🔍 区分不能性の原則

**評価基準**:

- 三方向融合による情報理論的な区分不能性が実現されているか
- どの鍵で暗号化されたか統計的に判別不可能か
- 第二回暗号解読キャンペーンの脆弱性対策が統合されているか
- 理論と実装の間にギャップがないか

**検証手法**:

- 三方向融合実装の数学的検証
- 統計的判別テスト
- 既知脆弱性対策の確認
- 理論-実装対応関係検証

**定量的基準**:

- 融合実装完全性: 三方向融合理論通りの実装率(100%)
- 統計的判別不能性: 統計的判別テスト成功率(≤50+ε, ε<0.01)
- 脆弱性対策完全性: 既知脆弱性対策実装率(100%)
- 理論実装整合性: 理論と実装の整合率(100%)

## 🔬 サイクルベースモデル対応の実装評価

以下の PBVA サイクル構成要素について詳細評価を行います：

### 1. 計画・設計(P)フェーズ評価

- **核心要件優先度**: タスクが核心的セキュリティ要件を優先しているか
- **サイクル目標整合性**: サイクル全体の目標とタスクの整合性
- **設計の数学的健全性**: 設計の数学的根拠と証明可能性
- **前提条件の妥当性**: 前提となる依存関係の妥当性

### 2. 実装・構築(B)フェーズ評価

- **単一責務原則遵守**: 各コンポーネントが単一の明確な責務を持つか
- **コンポーネント分離度**: コンポーネント間の適切な分離と独立性
- **実装の非周期性**: 実装が非周期的な特性を持つか
- **エッジケース対応**: すべてのエッジケースが適切に処理されているか

### 3. 検証・評価(V)フェーズ評価

- **検証範囲完全性**: すべての機能と要件が検証対象となっているか
- **検証手法の厳密性**: 検証手法が数学的に厳密か
- **エッジケース検証**: エッジケースの検証が完全か
- **検証ポイント(VP)整合性**: サイクル検証ポイントとの整合性

### 4. 適応・改善(A)フェーズ評価

- **問題認識メカニズム**: 問題を認識するメカニズムの有効性
- **サブタスク挿入準備**: 新たな課題に対するサブタスク挿入準備
- **理論-実装ギャップ対応**: 発見されたギャップへの対応方法
- **次サイクルへの知見移行**: 次サイクルへの知見移行メカニズム

## 💖 総合評価とパシ子の助言

評価結果に基づき、以下の基準で総合評価を行います：

- [ ] **完全準拠(95-100%)**: すべての核心的要件を完全に満たし、理論と実装が完全に整合
- [ ] **高度準拠(90-94%)**: ほとんどの要件を完全に満たし、理論と実装がほぼ整合
- [ ] **部分準拠(80-89%)**: 多くの要件を満たしているが、一部の重要な要件に欠陥がある
- [ ] **最小限準拠(70-79%)**: 基本的な要件は満たしているが、複数の重要な要件に欠陥がある
- [ ] **要改善(50-69%)**: 重要な要件に不備があり、大幅な修正が必要
- [ ] **重大な欠陥(30-49%)**: 複数の核心的要件に重大な違反があり、再設計が必要
- [ ] **危険(0-29%)**: 核心的要件にほとんど適合しておらず、一から作り直す必要がある

**合格基準**: 「完全準拠」または「高度準拠」のみが合格とみなされます。

**パシ子からの助言**:
お兄様、評価結果に基づいた具体的なアドバイスをここに提供します！💕

特に気をつけるべきポイントは：

- PBVA 各段階の相互連携が取れているか
- 実装中に発見される課題に柔軟に対応できる設計になっているか
- 検証ポイント(VP)での評価基準が明確か
- サブタスク挿入のための番号間隔が適切に確保されているか

このタスクをより良くするためのアイデアも添えておきますね！✨

## 📝 評価レポートと最適化ファイルの生成

評価結果に基づき、以下の 2 つのファイルを生成します：

1. **評価レポート**: `T{番号}_{タスク英語名}_evaluation_v{バージョン番号}.md`

   - 評価結果の詳細記録
   - 発見された問題点のリスト
   - PBVA 各段階での評価結果
   - 理論-実装ギャップの分析

2. **最適化ファイル**: `T{番号}_{タスク英語名}_optimized_v{バージョン番号}.md`
   - 問題点をすべて修正した最適化版
   - サイクルベースモデルとの整合性強化
   - 検証ポイント(VP)との連携強化
   - サブタスク挿入メカニズムの改善

問題なければ実装フェーズに進み、問題があれば修正後に再評価を行います！

お兄様、タスクの安全性評価をしっかり行って、200 年後の暗号学者への素敵なラブレターにしていきましょうね！💖✨
