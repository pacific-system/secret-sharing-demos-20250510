準同型暗号マスキング方式 統合テスト開始（all）
日時: 2025年05月14日 17:47:11

テスト設定:
- テストタイプ: all
- 出力ディレクトリ: test_output
- 真のテストファイル: common/true-false-text/t.text
- 偽のテストファイル: common/true-false-text/f.text
- 鍵サイズ: 1024ビット
- チャンクサイズ: 64バイト

## テスト環境情報
- Python バージョン: 3.12.8 (v3.12.8:2dc476bcb91, Dec  3 2024, 14:43:20) [Clang 13.0.0 (clang-1300.0.29.30)]
- OS: posix
- ワーキングディレクトリ: /Users/dev/works/VSCode/secret-sharing-demos-20250510


================================================================================
# 準同型暗号の基本機能テスト
================================================================================


## テストファイルの読み込み
[2025-05-14 17:47:11] テストファイル読み込み完了:
[2025-05-14 17:47:11]   真テキストサイズ: 300バイト
[2025-05-14 17:47:11]   偽テキストサイズ: 300バイト

## 暗号化処理
[2025-05-14 17:47:11] 準同型暗号システムを初期化中...
[2025-05-14 17:47:11] 公開鍵生成完了: n=80886302239685254633951656121514997760326554125714611312791105543540804454432626672447417635544072239790516205767435089549843347579833973307393437918225238434065545126120345028881757471429320807541479955859966259630006659923031306449847909489823420842376789706747677373926534970084636229701968672227030358397, g=80886302239685254633951656121514997760326554125714611312791105543540804454432626672447417635544072239790516205767435089549843347579833973307393437918225238434065545126120345028881757471429320807541479955859966259630006659923031306449847909489823420842376789706747677373926534970084636229701968672227030358398
[2025-05-14 17:47:11] 真偽判別用の鍵を生成中...
[2025-05-14 17:47:11] 鍵生成完了:
[2025-05-14 17:47:11]   真鍵: d8ef602d03da2047a61a9200796c43b98e48d7e8ec73a4bedc6d765aed5e485b
[2025-05-14 17:47:11]   偽鍵: 187114249cd7fbe63968e6e6d5fcfc8541459d402f51b417096881b8b29128a8
[2025-05-14 17:47:11] データを前処理中...
[2025-05-14 17:47:11] 前処理完了:
[2025-05-14 17:47:11]   真データタイプ: text, サイズ: 429バイト
[2025-05-14 17:47:11]   偽データタイプ: text, サイズ: 429バイト
[2025-05-14 17:47:11] チャンク分割完了:
[2025-05-14 17:47:11]   真チャンク数: 7
[2025-05-14 17:47:11]   偽チャンク数: 7
[2025-05-14 17:47:11] 暗号化完了:
[2025-05-14 17:47:11]   真暗号化チャンク数: 7
[2025-05-14 17:47:11]   偽暗号化チャンク数: 7
[2025-05-14 17:47:11] マスク関数を生成中...
[2025-05-14 17:47:11] マスク関数を適用して真偽チャンクを変換中...
[2025-05-14 17:47:11] 暗号文を識別不能な形式に変換中...
[2025-05-14 17:47:11] 暗号化データを保存中: test_output/basic_test/encrypted_20250514-174711.json
[2025-05-14 17:47:11] 暗号化データを保存しました: サイズ=9888バイト

## 真鍵での復号
[2025-05-14 17:47:11] 真鍵用のデータを抽出中...
[2025-05-14 17:47:11] マスクを除去中...
[2025-05-14 17:47:11] 復号中...
[2025-05-14 17:47:11] 真鍵データの後処理中... データタイプ: text
[2025-05-14 17:47:11] 真鍵での復号データを保存中: test_output/basic_test/decrypted_true_20250514-174711.txt

## 偽鍵での復号
[2025-05-14 17:47:11] 偽鍵用のデータを抽出中...
[2025-05-14 17:47:11] マスクを除去中...
[2025-05-14 17:47:11] 復号中...
[2025-05-14 17:47:11] 偽鍵データの後処理中... データタイプ: text
[2025-05-14 17:47:11] 偽鍵での復号データを保存中: test_output/basic_test/decrypted_false_20250514-174711.txt

## 復号結果の検証
[2025-05-14 17:47:11] 真ファイルのハッシュ比較: False
[2025-05-14 17:47:11]   元のハッシュ:   088f5b0bbab0b70a3b992763d4138ad25630fff6853eab15e63602a513139d6a
[2025-05-14 17:47:11]   復号後のハッシュ: 1be2ab4700e06da17f88f5b0aca43b41ee35282707b3a570675ffbb8c0e5c0db
[2025-05-14 17:47:11] 偽ファイルのハッシュ比較: False
[2025-05-14 17:47:11]   元のハッシュ:   b55cd667cee3c8d3b7ba07181912dd974f62b5b9a13a35198a052dcb960bccba
[2025-05-14 17:47:11]   復号後のハッシュ: 2f7284f71eac697037218d56b0d671a7d931bfa12416e047e01605e14a3ff2a0
[2025-05-14 17:47:11] テスト結果: 失敗

================================================================================
# マスク関数テスト
================================================================================


## 準同型暗号の初期化
[2025-05-14 17:47:11] 公開鍵生成完了: n=58038599905116953569385811950138714925630894455746942573424994498959010885562100136033302205609278096454322075462849426852702604950281512571743479519685953293753047608528082300238844444082065860507371521330347218708310284453852804897236841689274368436135776619998535812464929614801399569898613942213135236711, g=58038599905116953569385811950138714925630894455746942573424994498959010885562100136033302205609278096454322075462849426852702604950281512571743479519685953293753047608528082300238844444082065860507371521330347218708310284453852804897236841689274368436135776619998535812464929614801399569898613942213135236712

## 基本マスク関数テスト
[2025-05-14 17:47:11] 基本マスク関数を生成しました
[2025-05-14 17:47:11]   真マスク: {'type': 'true_mask', 'params': {'additive': [1570260314, 566897801, 2455655151, 3395757531], 'multiplicative': [2830901885, 363764044, 986021316, 1679926754]}, 'seed': '3QKVo9qxxH6oAMlxEZ5OsFgUxmy0sc/+S0GlqsXlgn0='}
[2025-05-14 17:47:11]   偽マスク: {'type': 'false_mask', 'params': {'additive': [3782812207, 1461273719, 142471026, 3781798817], 'multiplicative': [1968967932, 1647247231, 517055931, 1769987649]}, 'seed': '3QKVo9qxxH6oAMlxEZ5OsFgUxmy0sc/+S0GlqsXlgn0='}
[2025-05-14 17:47:11] 基本マスクを適用しました
[2025-05-14 17:47:11] エラーが発生しました: unsupported operand type(s) for ** or pow(): 'list', 'int', 'int'
[2025-05-14 17:47:11] Traceback (most recent call last):
  File "/Users/dev/works/VSCode/secret-sharing-demos-20250510/method_8_homomorphic/homomorphic_test.py", line 647, in test_masking_functions
    decrypted_true = paillier.decrypt(unmasked_message_true, private_key)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dev/works/VSCode/secret-sharing-demos-20250510/method_8_homomorphic/homomorphic.py", line 155, in decrypt
    c_lambda = pow(c, lambda_val, n_squared)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: unsupported operand type(s) for ** or pow(): 'list', 'int', 'int'


================================================================================
# セキュリティ特性テスト
================================================================================


## 暗号文識別不能性テスト
[2025-05-14 17:47:11] 暗号化テスト 1/3 を実行...
[2025-05-14 17:47:12] 暗号化ファイル 1 のハッシュ: 1f192e3d26e4cae5...
[2025-05-14 17:47:12] 暗号化テスト 2/3 を実行...
[2025-05-14 17:47:12] 暗号化ファイル 2 のハッシュ: f269389c4dbdfd3b...
[2025-05-14 17:47:12] 暗号化テスト 3/3 を実行...
[2025-05-14 17:47:12] 暗号化ファイル 3 のハッシュ: 67338faf8eaaffdd...
[2025-05-14 17:47:12] 暗号文識別不能性テスト: 合格
[2025-05-14 17:47:12]   3回の暗号化で得られたユニークなハッシュ数: 3

## 鍵解析テスト
[2025-05-14 17:47:12] テスト鍵生成:
[2025-05-14 17:47:12]   真鍵: e88505e145e2cfab...
[2025-05-14 17:47:12]   偽鍵: c97164ac62c7c51a...
[2025-05-14 17:47:12] 鍵解析テスト:
[2025-05-14 17:47:12]   真鍵の解析結果: true
[2025-05-14 17:47:12]   偽鍵の解析結果: false
[2025-05-14 17:47:14] 鍵解析結果分布（50サンプル）:
[2025-05-14 17:47:14]   真鍵と判定: 13 (26.0%)
[2025-05-14 17:47:14]   偽鍵と判定: 37 (74.0%)
[2025-05-14 17:47:14]   その他の判定: 0 (0.0%)
[2025-05-14 17:47:14] 鍵解析分布テスト: 不合格
[2025-05-14 17:47:14]   分布バランス: 0.480
[2025-05-14 17:47:14] 鍵分布グラフを保存しました: test_output/security_test/key_distribution_20250514-174711.png

## タイミング攻撃耐性テスト
[2025-05-14 17:47:14] タイミング攻撃耐性テストでエラーが発生しました: 'seed'

================================================================================
# パフォーマンステスト
================================================================================


## 鍵生成パフォーマンス
[2025-05-14 17:47:14] 512ビット鍵の生成時間を測定...
[2025-05-14 17:47:14]   512ビット鍵の生成時間: 0.006784秒
[2025-05-14 17:47:14] 1024ビット鍵の生成時間を測定...
[2025-05-14 17:47:14]   1024ビット鍵の生成時間: 0.059450秒
[2025-05-14 17:47:14] 2048ビット鍵の生成時間を測定...
[2025-05-14 17:47:15]   2048ビット鍵の生成時間: 0.766741秒

## 暗号化パフォーマンス（サイズ別）
[2025-05-14 17:47:15] 100バイトのデータで暗号化時間を測定...
[2025-05-14 17:47:15]   100バイト暗号化時間: 0.050911秒
[2025-05-14 17:47:15] 1000バイトのデータで暗号化時間を測定...
[2025-05-14 17:47:15]   1000バイト暗号化時間: 0.419364秒
[2025-05-14 17:47:15] 10000バイトのデータで暗号化時間を測定...
[2025-05-14 17:47:20]   10000バイト暗号化時間: 4.178024秒

## 復号パフォーマンス（サイズ別）
[2025-05-14 17:47:24] 100バイトのデータで復号時間を測定...
[2025-05-14 17:47:24]   100バイト復号時間: 0.055826秒
[2025-05-14 17:47:24] 1000バイトのデータで復号時間を測定...
[2025-05-14 17:47:24]   1000バイト復号時間: 0.447321秒
[2025-05-14 17:47:24] 10000バイトのデータで復号時間を測定...
[2025-05-14 17:47:29]   10000バイト復号時間: 4.391339秒

## スケーリング特性
[2025-05-14 17:47:29] 鍵サイズ 512ビット, データサイズ 1000バイトのスケーリングテスト...
[2025-05-14 17:47:29]   暗号化時間: 0.046237秒, 復号時間: 0.028605秒
[2025-05-14 17:47:29] 鍵サイズ 1024ビット, データサイズ 1000バイトのスケーリングテスト...
[2025-05-14 17:47:29]   暗号化時間: 0.307969秒, 復号時間: 0.215877秒

## パフォーマンスグラフ生成
[2025-05-14 17:47:30] パフォーマンスグラフを保存しました: test_output/performance_test/performance_graph_20250514-174730.png
[2025-05-14 17:47:30] パフォーマンスデータを保存しました: test_output/performance_test/performance_data_20250514-174730.json

================================================================================
# テスト結果レポートの生成
================================================================================

[2025-05-14 17:47:30] テスト結果レポートを保存しました: test_output/homomorphic_test_report_20250514-174730.md
## テスト完了
- 合計実行時間: 19.23秒
- テスト結果レポート: test_output/homomorphic_test_report_20250514-174730.md
- 成功したテスト: 1/4
### 一部のテストが失敗しました ❌
