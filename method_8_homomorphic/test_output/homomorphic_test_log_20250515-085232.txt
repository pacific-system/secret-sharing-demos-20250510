準同型暗号マスキング方式 統合テスト開始（indistinguishable）
日時: 2025年05月15日 08:52:32

テスト設定:
- テストタイプ: indistinguishable
- 出力ディレクトリ: test_output
- 真のテストファイル: ../common/true-false-text/t.text
- 偽のテストファイル: ../common/true-false-text/f.text
- 鍵サイズ: 1024ビット
- チャンクサイズ: 64バイト

## テスト環境情報
- Python バージョン: 3.12.8 (v3.12.8:2dc476bcb91, Dec  3 2024, 14:43:20) [Clang 13.0.0 (clang-1300.0.29.30)]
- OS: posix
- ワーキングディレクトリ: /Users/dev/works/VSCode/secret-sharing-demos-20250510/method_8_homomorphic


================================================================================
# 識別不能性機能テスト
================================================================================


## 暗号文ランダム化テスト
[2025-05-15 08:52:32] 元の暗号文: 343721018801729213422119227990111908041037074844846166397970129112337763767402934062345869501414595553897474961919488593428330740152973404439703618369079154354187781600403188208540738096704023530962666030808146431274885803724099025133634584137111325913357179718007560731183338644705968135249349717689505767997579067496655026354958452811837573373929370814584521696555331365684855702301394204306889335716758383020999848052939312735717328432083884385199559444252697695934433532150360916826744941784767084136794183327392588695478199090213604025618850647987009762421222268598757021211566616761203651649747999108708767697
[2025-05-15 08:52:32] ランダム化後: 1455160362823287938559942683161792596625477055756543737614001770926289554118553861557919797341012572792454957630834482077910192100934725545081652381943239173773655591783057572584526126559138573092916703551808067866430268256863836904587863419293340931208801899639297932253251243317321586720908342032216172052792293935653775891760199032255277677446626047227454493500745667028174915899175303770234382101715795695929672549986295284104049818337444407141839718008761733510178654123848330418073076397722982473922306747553018324987100021805689710816604590440396947454810681799423095588744933212174154734524520057202227667532
[2025-05-15 08:52:32] 同じ暗号文か: False
[2025-05-15 08:52:32] 元の平文: 42
[2025-05-15 08:52:32] ランダム化後の平文: 42
[2025-05-15 08:52:32] 同じ平文か: True

## 統計的ノイズテスト
[2025-05-15 08:52:32] ノイズ追加後の復号値: [52017481041354688694549790212517787211575447615218253556539673837347972145716875258249334949358206979176547953146494231197807822898489528990974311001549022445335954799587185285313803411872044020600618436760900477279536090346374209080378980421957895588128133027694380782586122311397862268357145097086640029, 11223387109710453827192955856602264100417409720550001432047125581557509154399897270667809883977827084429620841522324166431035952017087542452865517899823860417004325498352747244974822795023080977983183021694072062856647727342526917998221790230487526807392140880021537142761873797629242589268801671108191699, 3968668281475892642311365252217393568436407059910068225224984453447125620451160568075133980245958990465472660062871286246082420379800750618541644504672395960075176096430173270207078167296703236357844201206365364971182279238999704530831809064703939268254998572006119439166836746901474905414682655174189305, 21044170756301808236183373739323775458544868329786602637084092389935379798109035129985988266399445808278433913282271303604474328937024681065914994318391840871534278709853492171016104945027147864085832435272623046717656907023376871657565465510322733931949334931262894598153485154971707306999278760643845704, 36300392361970116335760710520531153266012279648806379765632174851182030762020486254936021852467813661921742035635278725894642147603309709285207676620799860333217556705221410966969319854746875466256914161812405126418234976703400288531941360409163938740699790228200389916379048803415754169082009009836171036]
[2025-05-15 08:52:32] 追加されたノイズ値: [52017481041354688694549790212517787211575447615218253556539673837347972145716875258249334949358206979176547953146494231197807822898489528990974311001549022445335954799587185285313803411872044020600618436760900477279536090346374209080378980421957895588128133027694380782586122311397862268357145097086640019, 11223387109710453827192955856602264100417409720550001432047125581557509154399897270667809883977827084429620841522324166431035952017087542452865517899823860417004325498352747244974822795023080977983183021694072062856647727342526917998221790230487526807392140880021537142761873797629242589268801671108191679, 3968668281475892642311365252217393568436407059910068225224984453447125620451160568075133980245958990465472660062871286246082420379800750618541644504672395960075176096430173270207078167296703236357844201206365364971182279238999704530831809064703939268254998572006119439166836746901474905414682655174189275, 21044170756301808236183373739323775458544868329786602637084092389935379798109035129985988266399445808278433913282271303604474328937024681065914994318391840871534278709853492171016104945027147864085832435272623046717656907023376871657565465510322733931949334931262894598153485154971707306999278760643845664, 36300392361970116335760710520531153266012279648806379765632174851182030762020486254936021852467813661921742035635278725894642147603309709285207676620799860333217556705221410966969319854746875466256914161812405126418234976703400288531941360409163938740699790228200389916379048803415754169082009009836170986]
[2025-05-15 08:52:32] ノイズ除去後の復号値: [10, 20, 30, 40, 50]
[2025-05-15 08:52:32] 元の平文と一致するか: True

## 交互配置テスト
[2025-05-15 08:52:33] 交互配置後のチャンク数: 10
[2025-05-15 08:52:33] メタデータ: {'shuffle_seed': 'd17776c24200241d9babb81a5d4125c5', 'mapping': [{'type': 'true', 'index': 4}, {'type': 'false', 'index': 4}, {'type': 'true', 'index': 3}, {'type': 'false', 'index': 3}, {'type': 'true', 'index': 0}, {'type': 'false', 'index': 1}, {'type': 'true', 'index': 2}, {'type': 'false', 'index': 0}, {'type': 'false', 'index': 2}, {'type': 'true', 'index': 1}], 'original_true_length': 5, 'original_false_length': 5}
[2025-05-15 08:52:33] 元の真の平文: [10, 11, 12, 13, 14]
[2025-05-15 08:52:33] 復元された真の平文: [10, 11, 12, 13, 14]
[2025-05-15 08:52:33] 元の偽の平文: [100, 101, 102, 103, 104]
[2025-05-15 08:52:33] 復元された偽の平文: [100, 101, 102, 103, 104]

## 冗長性テスト
[2025-05-15 08:52:33] 冗長性追加後のチャンク数: 15
[2025-05-15 08:52:33] 冗長性メタデータ: {'redundancy_factor': 2, 'original_length': 5, 'original_indices': [0, 0, 0, 1, 1, 1, 2, 2, 2, 3, 3, 3, 4, 4, 4]}
[2025-05-15 08:52:33] 冗長性除去後のチャンク数: 5
[2025-05-15 08:52:33] 元の平文: [10, 11, 12, 13, 14]
[2025-05-15 08:52:33] 冗長性除去後の平文: [10, 11, 12, 13, 14]

## 総合的な識別不能性テスト
[2025-05-15 08:52:33] 識別不能性適用後の暗号文数: 20
[2025-05-15 08:52:33] 元の真の平文: [10, 11, 12, 13, 14]
[2025-05-15 08:52:33] 復元された真の平文: [10, 11, 12, 13, 14]
[2025-05-15 08:52:33] 元の偽の平文: [100, 101, 102, 103, 104]
[2025-05-15 08:52:33] 復元された偽の平文: [100, 101, 102, 103, 104]
[2025-05-15 08:52:33] 真の復元成功: True
[2025-05-15 08:52:33] 偽の復元成功: True

## 統計的識別不能性テスト
[2025-05-15 08:52:33] 元の分類精度: 0.6400
[2025-05-15 08:52:33] 識別不能性適用後の精度: 0.3800
[2025-05-15 08:52:33] 改善度: 0.0200
[2025-05-15 08:52:33] 識別不能と判定されるか: False
[2025-05-15 08:52:33] エラーが発生しました: name 'noisy_true' is not defined
[2025-05-15 08:52:34] Traceback (most recent call last):
  File "/Users/dev/works/VSCode/secret-sharing-demos-20250510/method_8_homomorphic/homomorphic_test.py", line 3029, in test_indistinguishable_features
    indist_true_bits = [ct.bit_length() for ct in noisy_true]
                                                  ^^^^^^^^^^
NameError: name 'noisy_true' is not defined


================================================================================
# テスト結果レポートの生成
================================================================================

[2025-05-15 08:52:34] テスト結果レポートを保存しました: test_output/homomorphic_test_report_20250515-085234.md
## テスト完了
- 合計実行時間: 1.32秒
- テスト結果レポート: test_output/homomorphic_test_report_20250515-085234.md
- ログファイル: test_output/homomorphic_test_log_20250515-085232.txt
- 成功したテスト: 0/5
### 一部のテストが失敗しました ❌
