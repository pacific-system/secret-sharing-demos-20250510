準同型暗号マスキング方式 統合テスト開始（indistinguishable）
日時: 2025年05月15日 09:46:14

テスト設定:
- テストタイプ: indistinguishable
- 出力ディレクトリ: test_output
- 真のテストファイル: ../common/true-false-text/t.text
- 偽のテストファイル: ../common/true-false-text/f.text
- 鍵サイズ: 1024ビット
- チャンクサイズ: 64バイト

## テスト環境情報
- Python バージョン: 3.12.8 (v3.12.8:2dc476bcb91, Dec  3 2024, 14:43:20) [Clang 13.0.0 (clang-1300.0.29.30)]
- OS: posix
- ワーキングディレクトリ: /Users/dev/works/VSCode/secret-sharing-demos-20250510


================================================================================
# 識別不能性機能テスト
================================================================================


## 暗号文ランダム化テスト
[2025-05-15 09:46:14] 元の暗号文: 3003552330935402600806889065614967433577593696122220430453926568460988204205363520844318252314285135691344578520938016001690885132929091623482976775114039396914413988076973886749595141221152801532175286213907799287417221879942418964799208263185522645657979573993652410069095585588759367870156612875765595762363790771166461229671700114740119296166599206784255102054646346015185927211314703737529520134122679340793045665952590024341985249067713910921950111790256126273009644290759394190008606545411976769350216489386560234476247700237838214250758777134137591618509550110305079593098039557844581348278743712423543456291
[2025-05-15 09:46:14] ランダム化後: 491588899085798510162936354083854201088411899359398125770165011954877455939421822144857824462694681598974513224715173579120876330690864716220120995308100521564438317681338206866789239579784383999544127957866354965180096195234501145479395715136324589156098581421416444484832643167022901705178690609788700064169518274070732070833455316969701682786457842304895782925897660899258263693872070513002567243745497409896350801501123220978904065201342251366790470246598940349389343676779103528863657618424513194595287787822991067209170138281539944159366571204712628733139102327072317414862037153169425470359487323897649464485
[2025-05-15 09:46:14] 同じ暗号文か: False
[2025-05-15 09:46:14] 元の平文: 42
[2025-05-15 09:46:14] ランダム化後の平文: 42
[2025-05-15 09:46:14] 同じ平文か: True

## 統計的ノイズテスト
[2025-05-15 09:46:14] ノイズ追加後の復号値: [59458046532956178323856531169550389533493795580912623521083650235932145139926874837370653503468264701700814918384564855594029353477523656502923346935442219787727754047319528831798095636430551548470961439524074191821682315137282129801318128877226409232310543704851272710500533551082445316228914844863586916, 72631236949251765101628450591286642616871840551200400671662905804075802116248542204874021453908345755883925841964140945158493526534832046975633263782690571317830639718043009858168358200198710038171081189077934370935383013453014769569676042720478996354595192049754088515704004027472618273191750664114750034, 30491795619175977057233497428460890372086728755032737266039024621436440950597728776437602910727638071853904792681866779322780129078949374699410067476447378402006914551824328272658653403719005314132174295354647784565872601983701914450704222744209868243728654013453256126211796966899540059004679940304010761, 17768843733752836697883591767933503974434354839162568113710161798769139407472075193417837138429246891809503811654168606775805664100447286884783341046539251672399799769804100120682863244945492996977783929951095913205570616066982742745050248550872316058158319024409419221228306073431471427491890349576787423, 74391983433734808891184889936238506440027982664355017204996848391568743779539078253657798483232743935834912502301298003398774736961439877867401967222351095204109593492280648842947764496155016781250141080201063668373027029890039421092269866511459154018017528123179261682925020346590550959257217021043739686]
[2025-05-15 09:46:14] 追加されたノイズ値: [59458046532956178323856531169550389533493795580912623521083650235932145139926874837370653503468264701700814918384564855594029353477523656502923346935442219787727754047319528831798095636430551548470961439524074191821682315137282129801318128877226409232310543704851272710500533551082445316228914844863586906, 72631236949251765101628450591286642616871840551200400671662905804075802116248542204874021453908345755883925841964140945158493526534832046975633263782690571317830639718043009858168358200198710038171081189077934370935383013453014769569676042720478996354595192049754088515704004027472618273191750664114750014, 30491795619175977057233497428460890372086728755032737266039024621436440950597728776437602910727638071853904792681866779322780129078949374699410067476447378402006914551824328272658653403719005314132174295354647784565872601983701914450704222744209868243728654013453256126211796966899540059004679940304010731, 17768843733752836697883591767933503974434354839162568113710161798769139407472075193417837138429246891809503811654168606775805664100447286884783341046539251672399799769804100120682863244945492996977783929951095913205570616066982742745050248550872316058158319024409419221228306073431471427491890349576787383, 74391983433734808891184889936238506440027982664355017204996848391568743779539078253657798483232743935834912502301298003398774736961439877867401967222351095204109593492280648842947764496155016781250141080201063668373027029890039421092269866511459154018017528123179261682925020346590550959257217021043739636]
[2025-05-15 09:46:14] ノイズ除去後の復号値: [10, 20, 30, 40, 50]
[2025-05-15 09:46:14] 元の平文と一致するか: True

## 交互配置テスト
[2025-05-15 09:46:15] 交互配置後のチャンク数: 10
[2025-05-15 09:46:15] メタデータ: {'shuffle_seed': '019fc19a4c0721add88c52bc6edf04d4', 'mapping': [{'type': 'true', 'index': 4}, {'type': 'true', 'index': 3}, {'type': 'true', 'index': 0}, {'type': 'false', 'index': 1}, {'type': 'false', 'index': 0}, {'type': 'false', 'index': 3}, {'type': 'false', 'index': 4}, {'type': 'false', 'index': 2}, {'type': 'true', 'index': 2}, {'type': 'true', 'index': 1}], 'original_true_length': 5, 'original_false_length': 5}
[2025-05-15 09:46:15] 元の真の平文: [10, 11, 12, 13, 14]
[2025-05-15 09:46:15] 復元された真の平文: [10, 11, 12, 13, 14]
[2025-05-15 09:46:15] 元の偽の平文: [100, 101, 102, 103, 104]
[2025-05-15 09:46:15] 復元された偽の平文: [100, 101, 102, 103, 104]

## 冗長性テスト
[2025-05-15 09:46:15] 冗長性追加後のチャンク数: 15
[2025-05-15 09:46:15] 冗長性メタデータ: {'redundancy_factor': 2, 'original_length': 5, 'original_indices': [0, 0, 0, 1, 1, 1, 2, 2, 2, 3, 3, 3, 4, 4, 4]}
[2025-05-15 09:46:15] 冗長性除去後のチャンク数: 5
[2025-05-15 09:46:15] 元の平文: [10, 11, 12, 13, 14]
[2025-05-15 09:46:15] 冗長性除去後の平文: [10, 11, 12, 13, 14]

## 総合的な識別不能性テスト
[2025-05-15 09:46:15] 識別不能性適用後の暗号文数: 20
[2025-05-15 09:46:15] 元の真の平文: [10, 11, 12, 13, 14]
[2025-05-15 09:46:15] 復元された真の平文: [10, 11, 12, 13, 14]
[2025-05-15 09:46:15] 元の偽の平文: [100, 101, 102, 103, 104]
[2025-05-15 09:46:15] 復元された偽の平文: [100, 101, 102, 103, 104]
[2025-05-15 09:46:15] 真の復元成功: True
[2025-05-15 09:46:15] 偽の復元成功: True

## 統計的識別不能性テスト
[2025-05-15 09:46:15] 元の分類精度: 0.3200
[2025-05-15 09:46:15] 識別不能性適用後の精度: 0.5100
[2025-05-15 09:46:15] 改善度: 0.1700
[2025-05-15 09:46:15] 識別不能と判定されるか: True
[2025-05-15 09:46:16] 識別不能性テスト結果グラフを保存しました: test_output/indistinguishable_test/indistinguishability_test_20250515-094614.png

## 攻撃シミュレーション：バイト分布の可視化
[2025-05-15 09:46:16] テストデータの読み込みエラー: [Errno 2] No such file or directory: '../common/true-false-text/t.text'
[2025-05-15 09:46:16] サンプルデータを使用します。
[2025-05-15 09:46:17] バイト分布プロット保存先: test_output/indistinguishable_test/indistinguishable_byte_distribution_20250515-094614.png

## 攻撃シミュレーション：統計的分析
[2025-05-15 09:46:17] 
真のデータの特徴量:
[2025-05-15 09:46:17]   平均値: 97.500000
[2025-05-15 09:46:17]   エントロピー: 3.899244
[2025-05-15 09:46:17]   分散: 702.181034
[2025-05-15 09:46:17]   相関: 9493.122807
[2025-05-15 09:46:17] 
偽のデータの特徴量:
[2025-05-15 09:46:17]   平均値: 97.118644
[2025-05-15 09:46:17]   エントロピー: 3.914898
[2025-05-15 09:46:17]   分散: 680.680839
[2025-05-15 09:46:17]   相関: 9425.620690
[2025-05-15 09:46:17] 
真の鍵で復号したデータの特徴量:
[2025-05-15 09:46:17]   平均値: 97.500000
[2025-05-15 09:46:17]   エントロピー: 3.899244
[2025-05-15 09:46:17]   分散: 702.181034
[2025-05-15 09:46:17]   相関: 9493.122807
[2025-05-15 09:46:17] 
偽の鍵で復号したデータの特徴量:
[2025-05-15 09:46:17]   平均値: 97.500000
[2025-05-15 09:46:17]   エントロピー: 3.899244
[2025-05-15 09:46:17]   分散: 702.181034
[2025-05-15 09:46:17]   相関: 9493.122807
[2025-05-15 09:46:17] 
真と偽のデータの特徴量の平均絶対差: 22.349831
[2025-05-15 09:46:17] 復号データ間の特徴量の平均絶対差: 0.000000
[2025-05-15 09:46:17] 差異の比率（復号/元）: 0.000000
[2025-05-15 09:46:17] 
結論: 攻撃者は統計的分析によって復号データを区別することはほぼ不可能です。

================================================================================
# テスト結果レポートの生成
================================================================================

テスト結果レポートを生成しました: test_output/homomorphic_test_report_20250515-094614.md
## テスト完了
- 合計実行時間: 3.08秒
- テスト結果レポート: test_output/homomorphic_test_report_20250515-094614.md
- ログファイル: test_output/homomorphic_test_log_20250515-094614.txt
- 成功したテスト: 1/5
### 一部のテストが失敗しました ❌
