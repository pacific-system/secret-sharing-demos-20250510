準同型暗号マスキング方式 統合テスト開始（basic）
日時: 2025年05月14日 19:05:04

テスト設定:
- テストタイプ: basic
- 出力ディレクトリ: test_output
- 真のテストファイル: ../common/true-false-text/t.text
- 偽のテストファイル: ../common/true-false-text/f.text
- 鍵サイズ: 1024ビット
- チャンクサイズ: 64バイト

## テスト環境情報
- Python バージョン: 3.12.8 (v3.12.8:2dc476bcb91, Dec  3 2024, 14:43:20) [Clang 13.0.0 (clang-1300.0.29.30)]
- OS: posix
- ワーキングディレクトリ: /Users/dev/works/VSCode/secret-sharing-demos-20250510/method_8_homomorphic


================================================================================
# 準同型暗号の基本機能テスト
================================================================================


## テストファイルの読み込み
[2025-05-14 19:05:04] テストファイル読み込み完了:
[2025-05-14 19:05:04]   真テキストサイズ: 300バイト
[2025-05-14 19:05:04]   偽テキストサイズ: 300バイト

## 暗号化処理
[2025-05-14 19:05:04] 準同型暗号システムを初期化中...
[2025-05-14 19:05:04] 公開鍵生成完了: n=89119577962689185273426737174405814750836172302314380334200195102658301182953536305642632430046500874693656013382362323954553617829027023380642576341218878931967474724175225435050871171308703111594523037294169856082638830795682366671300063213101104253355996694158041110051203116805004165751953360712714248517, g=89119577962689185273426737174405814750836172302314380334200195102658301182953536305642632430046500874693656013382362323954553617829027023380642576341218878931967474724175225435050871171308703111594523037294169856082638830795682366671300063213101104253355996694158041110051203116805004165751953360712714248518
[2025-05-14 19:05:04] 真偽判別用の鍵を生成中...
[2025-05-14 19:05:04] 鍵生成完了:
[2025-05-14 19:05:04]   真鍵: 50d27586e50666c040a2abd47d6557bc89ac48d1d0cb5500b7d44230ce51bb01
[2025-05-14 19:05:04]   偽鍵: c8d047ba7e08654f0d8ddb90314093aaa66ef5492df798a38a8ad4a3854fa289
[2025-05-14 19:05:04] データを前処理中...
[2025-05-14 19:05:04] 前処理完了:
[2025-05-14 19:05:04]   真データタイプ: text, サイズ: 429バイト
[2025-05-14 19:05:04]   偽データタイプ: text, サイズ: 429バイト
[2025-05-14 19:05:04] チャンク分割完了:
[2025-05-14 19:05:04]   真チャンク数: 7
[2025-05-14 19:05:04]   偽チャンク数: 7
[2025-05-14 19:05:04] 真データ暗号化中: 1/7
[2025-05-14 19:05:04] 真データ暗号化中: 6/7
[2025-05-14 19:05:04] 偽データ暗号化中: 1/7
[2025-05-14 19:05:04] 偽データ暗号化中: 6/7
[2025-05-14 19:05:04] 暗号化完了:
[2025-05-14 19:05:04]   真暗号化チャンク数: 7
[2025-05-14 19:05:04]   偽暗号化チャンク数: 7
[2025-05-14 19:05:04] マスク関数を生成中...
[2025-05-14 19:05:04] マスク関数を適用して真偽チャンクを変換中...
[2025-05-14 19:05:04] 暗号文を識別不能な形式に変換中...
[2025-05-14 19:05:04] 暗号化データを保存中: test_output/basic_test/encrypted_20250514-190504.json
[2025-05-14 19:05:04] 暗号化データを保存しました: サイズ=9889バイト

## 真鍵での復号
[2025-05-14 19:05:04] 真鍵用のデータを抽出中...
[2025-05-14 19:05:04] マスクを除去中...
[2025-05-14 19:05:04] 復号中...
[2025-05-14 19:05:04] 真鍵での復号中: 1/7
[2025-05-14 19:05:04] 真鍵での復号中: 6/7
[2025-05-14 19:05:04] 真鍵データの後処理中... データタイプ: text
[2025-05-14 19:05:04] 真鍵での復号データを保存中: test_output/basic_test/decrypted_true_20250514-190504.txt

## 偽鍵での復号
[2025-05-14 19:05:04] 偽鍵用のデータを抽出中...
[2025-05-14 19:05:04] マスクを除去中...
[2025-05-14 19:05:05] 復号中...
[2025-05-14 19:05:05] 偽鍵での復号中: 1/7
[2025-05-14 19:05:05] 偽鍵での復号中: 6/7
[2025-05-14 19:05:05] 偽鍵データの後処理中... データタイプ: text
[2025-05-14 19:05:05] 偽鍵での復号データを保存中: test_output/basic_test/decrypted_false_20250514-190504.txt

## 復号結果の検証
[2025-05-14 19:05:05] 真ファイルのハッシュ比較: False
[2025-05-14 19:05:05]   元のハッシュ:   088f5b0bbab0b70a3b992763d4138ad25630fff6853eab15e63602a513139d6a
[2025-05-14 19:05:05]   復号後のハッシュ: 2c328374387a5a31e7648fa0f5e1b13d7b30992eb2ba6b00ad4caa3342825876
[2025-05-14 19:05:05] 偽ファイルのハッシュ比較: False
[2025-05-14 19:05:05]   元のハッシュ:   b55cd667cee3c8d3b7ba07181912dd974f62b5b9a13a35198a052dcb960bccba
[2025-05-14 19:05:05]   復号後のハッシュ: e225d4ca69e9e33e9dfa15af3e49acc9932b242874ad27a6e56332e021f09186
[2025-05-14 19:05:05] テスト結果: 失敗

================================================================================
# 検証結果レポートの作成
================================================================================


====== 準同型暗号マスキング方式 検証結果 ======
元の真ファイルハッシュ: 088f5b0bbab0b70a3b992763d4138ad25630fff6853eab15e63602a513139d6a
復号された真ファイルハッシュ: 
真ファイル一致: 失敗 ❌
元の偽ファイルハッシュ: b55cd667cee3c8d3b7ba07181912dd974f62b5b9a13a35198a052dcb960bccba
復号された偽ファイルハッシュ: 
偽ファイル一致: 失敗 ❌
検証結果グラフを保存しました: test_output/verification_result_20250514-190504.png

❌ 検証失敗: 暗号化または復号化に問題があります。
  - 真の鍵による復号で元の真ファイルが得られませんでした。
  - 偽の鍵による復号で元の偽ファイルが得られませんでした。

================================================================================
# テスト結果レポートの生成
================================================================================

[2025-05-14 19:05:05] テスト結果レポートを保存しました: test_output/homomorphic_test_report_20250514-190505.md
## テスト完了
- 合計実行時間: 0.83秒
- テスト結果レポート: test_output/homomorphic_test_report_20250514-190505.md
- ログファイル: test_output/homomorphic_test_log_20250514-190504.txt
[2025-05-14 19:05:05] エラーが発生しました: 'str' object has no attribute 'get'
[2025-05-14 19:05:05] Traceback (most recent call last):
  File "/Users/dev/works/VSCode/secret-sharing-demos-20250510/method_8_homomorphic/homomorphic_test.py", line 2566, in main
    success_count = sum(1 for test in TEST_RESULTS.values() if test.get('success', False))
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dev/works/VSCode/secret-sharing-demos-20250510/method_8_homomorphic/homomorphic_test.py", line 2566, in <genexpr>
    success_count = sum(1 for test in TEST_RESULTS.values() if test.get('success', False))
                                                               ^^^^^^^^
AttributeError: 'str' object has no attribute 'get'

