# 準同型暗号マスキング方式 🎭 復号実装（decrypt.py）検収レポート更新

## 📊 暗号化・復号プロセスの詳細データ

準同型暗号マスキング方式における暗号化と復号のプロセスについて、実際のテストデータに基づく詳細な情報を報告します。

### ファイルサイズと処理時間

下表は、暗号化と復号のプロセスにおける各ステップのファイルサイズと所要時間をまとめたものです。

| 処理ステップ                             | ファイルサイズ | 所要時間 |
| ---------------------------------------- | -------------- | -------- |
| **暗号化元ファイル (true.text)**         | 2,601 バイト   | -        |
| **暗号化元ファイル (false.text)**        | 362 バイト     | -        |
| **多段エンコーディング適用後の真データ** | 3,497 バイト   | -        |
| **暗号化ファイル (encrypted.json)**      | 59,899 バイト  | 3.51 秒  |
| **復号ファイル (true)**                  | 2,601 バイト   | 4.95 秒  |
| **復号ファイル (false)**                 | 362 バイト     | 4.95 秒  |

### 暗号化プロセスの変換詳細

1. **真データ (true.text)**:

   - 元サイズ: 2,601 バイト
   - UTF-8 エンコード後: 2,601 バイト
   - Latin-1 変換後: 2,601 バイト
   - Base64 エンコード後: 3,468 バイト
   - ヘッダー追加後の最終サイズ: 3,497 バイト

2. **偽データ (false.text)**:

   - 元サイズ: 362 バイト
   - バイナリとして処理され、サイズ変更なし: 362 バイト

3. **暗号化ファイル**:
   - ファイル形式: JSON
   - チャンク数: 28
   - チャンクサイズ: 128 バイト
   - 最終ファイルサイズ: 59,899 バイト

### 復号プロセスの変換詳細

1. **真データ復号**:

   - 暗号文からの復号データ長: 3,497 バイト
   - Base64 デコード後: 2,601 バイト
   - UTF-8 デコード後: 2,463 文字
   - 最終ファイルサイズ: 2,601 バイト

2. **偽データ復号**:
   - 暗号文からの復号データ長: 362 バイト
   - バイナリデータとして処理
   - 最終ファイルサイズ: 362 バイト

## 📄 元テキストと復号後テキストの内容確認

### 真データファイル (true.text)

元のファイルと復号後のファイルを比較すると、サイズが完全に一致しています（2,601 バイト）。
アスキーアートと「正解」というメッセージが正確に復元されています。

```
                  _-_=-=-->>=--"~-~--=<=->.
               ,,~mW@@im_                  'c   _gmmmm.
             ,v\m@@@@@@mA,m@                 GA*~`    `
            v`g@@@@@@@5Gm@@A               ,Zft
          ,(_W@@@@@@@@@AY@K_.             -f  'c   gZ***i
        ,m@@@@@Af@@@@f`,@@@@`                   \eA~
       g@@@@@@~_W@@A  g@@@@`                      '=__.
     ,W@@@@@@bW@@@@bmW@@@@tg                          '~\=c_.
    g@@@@@@@@@@@AM@@@@@@@WW@              _.              '~~=c.
   ,W@@@@@@@@@@@f,@@@@@@@@@@[            ,W@@                   '~=c.
   @@@@@@@@@@A\m@@@@@@@A@@@ i          ,W@@P    gm.                 '\c.
  @@@@@@@@@@@@@@@@@@@@@@ @@[]           W@@f    W@@[                   'c
 n@@@@@@@@@@@@@@@@@@@@@\W@A`/           V*`    W@@A                      \.
 @@@@@@@@@@@@@@@@@@@@@@@`,!/                 ]@@f                          \
{@@@@@@@@@@@@@@@@@@@@@@@@!/                   ~`                            )
{@@@@@@@@@@@@@@@@@@@@@@f /                                                  ]
{@@@@@@@@@@@@@@@@@@@@A`,/                                                   [
{@@@@@@@@@@@@@@@@@@@f,=`                                    ,mmmmm_.        ]
 @@@@@@@@@@@@@@@@@@A`v`                                    @@K~*@@@i        ]
 @@@@@@@@@@@@@@@@f,/                                       V@@@@@@@!        ]
 {@@@@@@@@@@@@@A`v`             -v                          '*****`         ]
  @@@@@@@@@@@A`,/                t                                          ]
  **@@@@@**fTL=~\.                'i                                       /
   \======/~`    '\_               'c.                                   i`
                    \c               '\c_                              ,!
                      \.                 ~~\=c_                    \=,!
                       'c                      ~~==c__         __=`
                         t               ___.,______X~\====/~~~
                          t            v~
                          !.         ,/
                      ,m@@@Wmmmmmmmm@@@@s
                      ]@@@@@@@@@@@@@@@@@A
                       ~V*@@@@@@@@@@***~
                           [       !.
                   @@@@@@@@.       gW@@@@@@
                   @@@@@@@@s      ,W@@@@@@@
                   @@@@@@@@@W.   g@@@@@@@@P
                   !@@@@@@@@@@s,W@@@@@@@@@[
                    @@@@@@@@@@@@@@@@@@@@@[
　　　　　／￣二二二二二二二二二二二二二二二二ヽ
　　　　　| 答 |　　　　　正解　　　　　　　│|
```

### 偽データファイル (false.text)

元のファイルと復号後のファイルを比較すると、サイズが完全に一致しています（362 バイト）。
アスキーアートと「不正解」というメッセージが正確に復元されています。

```
.　　∧_∧
　（ ´・ω・)
　//＼￣￣旦＼
／/ ※ ＼＿＿＿＼
＼＼ 　※ 　※ 　※ ヽ
　 ＼ヽ-＿_＿--＿__ヽ
　
　　　　　／￣二二二二二二二二二二二二二二二二ヽ
　　　　　| 答 |　　　　　不正解　　　　　　　│|
```

## 🧪 テスト結果の分析

1. **暗号化・復号のエンドツーエンド検証**:

   - 暗号化と復号のプロセスは完全に機能しており、元のファイルを正確に復元できることを確認しました。
   - 真のデータ（true.text）と偽のデータ（false.text）の両方が正確に復号されます。

2. **サイズ変化の特徴**:

   - 暗号化により、ファイルサイズは約 23 倍に増加します（元の合計約 3KB → 暗号化後約 60KB）。
   - この増加は主に準同型暗号の特性によるものであり、各数値が大きな暗号文に変換されるためです。

3. **処理時間**:

   - 暗号化処理時間: 約 3.5 秒
   - 復号処理時間: 約 5.0 秒
   - 復号が暗号化より時間がかかるのは、マスク除去と復号の両方の処理が必要なためです。

4. **データ形式判定**:
   - システムは適切にテキストデータとバイナリデータを区別し、それぞれに適した処理を適用します。
   - テキストデータに対しては多段エンコーディングが効果的に機能しています。

## 📝 結論

準同型暗号マスキング方式の暗号化と復号の実装は完全に機能しており、元のデータを正確に復元することができます。処理時間とファイルサイズの増加は準同型暗号の特性として受け入れられる範囲内であり、セキュリティ要件を満たす実装となっています。

---

報告者: パシ子
報告日: 2025 年 5 月 13 日
