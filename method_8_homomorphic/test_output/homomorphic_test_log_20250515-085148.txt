準同型暗号マスキング方式 統合テスト開始（indistinguishable）
日時: 2025年05月15日 08:51:48

テスト設定:
- テストタイプ: indistinguishable
- 出力ディレクトリ: test_output
- 真のテストファイル: ../common/true-false-text/t.text
- 偽のテストファイル: ../common/true-false-text/f.text
- 鍵サイズ: 1024ビット
- チャンクサイズ: 64バイト

## テスト環境情報
- Python バージョン: 3.12.8 (v3.12.8:2dc476bcb91, Dec  3 2024, 14:43:20) [Clang 13.0.0 (clang-1300.0.29.30)]
- OS: posix
- ワーキングディレクトリ: /Users/dev/works/VSCode/secret-sharing-demos-20250510/method_8_homomorphic


================================================================================
# 識別不能性機能テスト
================================================================================


## 暗号文ランダム化テスト
[2025-05-15 08:51:48] 元の暗号文: 13594231486962900874198255076163133462453259173979773544395065626984379188360703128773249297178291040772962319627471565431847106073038240671331792622950509771540467804630377650492663317080225069711445756894929904617961850843421906547750621037277238954490860605974949868136848311700432509856991457812002790188717088820806545534753109085484247371680400565353563770446930070075012251932702240301512364486270499600931097425791404838166323122257942250794213219760056348606427229420498439930417249741680338046133767846503647478897078423165786987308491764331146247998344675181016632065443488704582406668225460909981903888647
[2025-05-15 08:51:48] ランダム化後: 16171841563921850751512983980531656903848585634669725951257390081367829762619439376926057230965817802316663103729043770299273930396812640878694506059134079092598766020921654858523730719038590886592105422879860624861730220884821940581730914626492023960817346785890182090262975585729515121231744608881420763926023904607246588769687349435886337001484306220235318012026718808419842516446768057976196229211017108988766590267069608760568978356382586303352536399280447182997928446981163591106214346956805641779827817094442817938280165095755249784666559265109283199935483302751594522162193359143776881254477486496508244268711
[2025-05-15 08:51:48] 同じ暗号文か: False
[2025-05-15 08:51:49] 元の平文: 42
[2025-05-15 08:51:49] ランダム化後の平文: 42
[2025-05-15 08:51:49] 同じ平文か: True

## 統計的ノイズテスト
[2025-05-15 08:51:49] ノイズ追加後の復号値: [32686707803373574891692846529739974816136483176491567121869213474858606022009131726299704041098769587313678297964860531783016652616540425516453321882313299385482092933788037701921026140777763505978851565206572292440691633952595147215785501657036147461116962509403456927410355366081291889839643477320078611, 63963530976154753422413172915506820011850480763856097134249556174765214250017685137346823216335084012645724255846821547739013753175033559684819004059761116475358323385408970546760316135160899684686231446407810600405660371567180403071344867195308812758721519319247001671600527054163903189255525654015484317, 25448164036134766199088524035546484320475100147654197140596235904212284844932648991491513814849178065869999299537244542439462116836290048180306801254028493250058821531211970403027121434990357744265477138704185878980715896903283985952944738296973927782990104356769753653238659521756359359927818516885280931, 104076774471357323318260505944690773966342084986861365392541897838007278436417988727226886008329816306240376628843488829207794340116489204468475920206743494340240401616460314712919831479417214042567181723285295807573686330149652503093028710200961500960033910176784478760034825323786217622316977209854550736, 57066949082444333713182038456756688468308041213897136984647151666204422681043860995324252820075177457782961270837309305148087053720449934042567446521149075372443297441219247794792854492146559166170004105995146402712783730670490784644254687970624710397710487373149609200474823752687604004862360985848519062]
[2025-05-15 08:51:49] 追加されたノイズ値: [32686707803373574891692846529739974816136483176491567121869213474858606022009131726299704041098769587313678297964860531783016652616540425516453321882313299385482092933788037701921026140777763505978851565206572292440691633952595147215785501657036147461116962509403456927410355366081291889839643477320078601, 63963530976154753422413172915506820011850480763856097134249556174765214250017685137346823216335084012645724255846821547739013753175033559684819004059761116475358323385408970546760316135160899684686231446407810600405660371567180403071344867195308812758721519319247001671600527054163903189255525654015484297, 25448164036134766199088524035546484320475100147654197140596235904212284844932648991491513814849178065869999299537244542439462116836290048180306801254028493250058821531211970403027121434990357744265477138704185878980715896903283985952944738296973927782990104356769753653238659521756359359927818516885280901, 104076774471357323318260505944690773966342084986861365392541897838007278436417988727226886008329816306240376628843488829207794340116489204468475920206743494340240401616460314712919831479417214042567181723285295807573686330149652503093028710200961500960033910176784478760034825323786217622316977209854550696, 57066949082444333713182038456756688468308041213897136984647151666204422681043860995324252820075177457782961270837309305148087053720449934042567446521149075372443297441219247794792854492146559166170004105995146402712783730670490784644254687970624710397710487373149609200474823752687604004862360985848519012]
[2025-05-15 08:51:49] ノイズ除去後の復号値: [10, 20, 30, 40, 50]
[2025-05-15 08:51:49] 元の平文と一致するか: True

## 交互配置テスト
[2025-05-15 08:51:49] 交互配置後のチャンク数: 10
[2025-05-15 08:51:49] メタデータ: {'shuffle_seed': 'db4495f076f8d3d3508192447a20571e', 'mapping': [{'type': 'false', 'index': 3}, {'type': 'false', 'index': 0}, {'type': 'true', 'index': 2}, {'type': 'true', 'index': 1}, {'type': 'true', 'index': 3}, {'type': 'false', 'index': 4}, {'type': 'true', 'index': 4}, {'type': 'false', 'index': 2}, {'type': 'false', 'index': 1}, {'type': 'true', 'index': 0}], 'original_true_length': 5, 'original_false_length': 5}
[2025-05-15 08:51:49] 元の真の平文: [10, 11, 12, 13, 14]
[2025-05-15 08:51:49] 復元された真の平文: [10, 11, 12, 13, 14]
[2025-05-15 08:51:49] 元の偽の平文: [100, 101, 102, 103, 104]
[2025-05-15 08:51:49] 復元された偽の平文: [100, 101, 102, 103, 104]

## 冗長性テスト
[2025-05-15 08:51:49] 冗長性追加後のチャンク数: 15
[2025-05-15 08:51:49] 冗長性メタデータ: {'redundancy_factor': 2, 'original_length': 5, 'original_indices': [0, 0, 0, 1, 1, 1, 2, 2, 2, 3, 3, 3, 4, 4, 4]}
[2025-05-15 08:51:49] 冗長性除去後のチャンク数: 5
[2025-05-15 08:51:49] 元の平文: [10, 11, 12, 13, 14]
[2025-05-15 08:51:49] 冗長性除去後の平文: [10, 11, 12, 13, 14]

## 総合的な識別不能性テスト
[2025-05-15 08:51:49] 識別不能性適用後の暗号文数: 20
[2025-05-15 08:51:50] 元の真の平文: [10, 11, 12, 13, 14]
[2025-05-15 08:51:50] 復元された真の平文: [10, 11, 12, 13, 14]
[2025-05-15 08:51:50] 元の偽の平文: [100, 101, 102, 103, 104]
[2025-05-15 08:51:50] 復元された偽の平文: [100, 101, 102, 103, 104]
[2025-05-15 08:51:50] 真の復元成功: True
[2025-05-15 08:51:50] 偽の復元成功: True

## 統計的識別不能性テスト
[2025-05-15 08:51:50] 元の分類精度: 0.5200
[2025-05-15 08:51:50] 識別不能性適用後の精度: 0.3800
[2025-05-15 08:51:50] 改善度: -0.1000
[2025-05-15 08:51:50] 識別不能と判定されるか: False
[2025-05-15 08:51:50] エラーが発生しました: name 'original_threshold' is not defined
[2025-05-15 08:51:50] Traceback (most recent call last):
  File "/Users/dev/works/VSCode/secret-sharing-demos-20250510/method_8_homomorphic/homomorphic_test.py", line 3017, in test_indistinguishable_features
    plt.axvline(x=original_threshold, color='black', linestyle='--')
                  ^^^^^^^^^^^^^^^^^^
NameError: name 'original_threshold' is not defined


================================================================================
# テスト結果レポートの生成
================================================================================

[2025-05-15 08:51:50] テスト結果レポートを保存しました: test_output/homomorphic_test_report_20250515-085150.md
## テスト完了
- 合計実行時間: 1.42秒
- テスト結果レポート: test_output/homomorphic_test_report_20250515-085150.md
- ログファイル: test_output/homomorphic_test_log_20250515-085148.txt
- 成功したテスト: 0/5
### 一部のテストが失敗しました ❌
