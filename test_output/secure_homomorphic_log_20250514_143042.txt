[2025-05-14 14:30:42] ====== 準同型暗号マスキング方式 完全検証テスト 開始 ======
[2025-05-14 14:30:42] ====== 準同型暗号マスキング方式 暗号化テスト ======
[2025-05-14 14:30:42] テストファイルの読み込み: common/true-false-text/t.text, common/true-false-text/f.text
[2025-05-14 14:30:42] テキストファイル読み込み成功:
[2025-05-14 14:30:42]   真テキストサイズ: 300バイト
[2025-05-14 14:30:42]   偽テキストサイズ: 300バイト
[2025-05-14 14:30:42] 真テキスト内容:
[2025-05-14 14:30:42] 　　｡:🌸・｡･ﾟ🌸*.ﾟ｡
　･🌸.🌸.🌼🌸｡:*･.🌼
　.ﾟ🌼.｡;｡🌸.:*🌸.ﾟ｡🌸｡
　:*｡_🌸🌼｡_🌸*･_ﾟ🌸
　　＼ξ　＼　ζ／
　　　∧🎀∧＼ξ
　　（＊･ω･)／
　　c/　つ∀o
　　.しー-Ｊおめでとう～🎉☠️
[2025-05-14 14:30:42] 偽テキスト内容:
[2025-05-14 14:30:42] 　　｡:🌸・｡･ﾟ🌸*.ﾟ｡
　･🌸.🌸.🌼🌸｡:*･.🌼
　.ﾟ🌼.｡;｡🌸.:*🌸.ﾟ｡🌸｡
　:*｡_🌸🌼｡_🌸*･_ﾟ🌸
　　＼ξ　＼　ζ／
　　　∧🎀∧＼ξ
　　（＊･ω･)／
　　c/　つ∀o
　　.しー-Ｊおめでとう～☠️🎉
[2025-05-14 14:30:42] 準同型暗号システムを初期化中...
[2025-05-14 14:30:42] 公開鍵生成完了: n=167369734804339578893371327032316760708457400757561579939871434804469532554066833329560461910587629230220917285752806046684992842973567245721624488615684932119706378922320745987413327890940734029890956067537730585112382994157585432487473641428215070132020936249561668420895058490021904195004548101034794562327, g=167369734804339578893371327032316760708457400757561579939871434804469532554066833329560461910587629230220917285752806046684992842973567245721624488615684932119706378922320745987413327890940734029890956067537730585112382994157585432487473641428215070132020936249561668420895058490021904195004548101034794562328
[2025-05-14 14:30:42] 真偽判別用の鍵を生成中...
[2025-05-14 14:30:42] 鍵生成完了:
[2025-05-14 14:30:42]   真鍵: 73dc7d3d8cf7f693e1ba4b52f9b02fb4180ba397966c9e968219a5d8ed82e4cb
[2025-05-14 14:30:42]   偽鍵: 21c5877b17eb148dccf283641747c1fd199abc0a431de697c6db3f02fb760256
[2025-05-14 14:30:42] データを前処理中...
[2025-05-14 14:30:42] [DEBUG] 暗号化前: データタイプ=text, サイズ=300バイト
[2025-05-14 14:30:42] [DEBUG] テキストマーカー付加: 305バイト
[2025-05-14 14:30:42] [DEBUG] テキストマーカー付加: 305バイト
[2025-05-14 14:30:42] 前処理完了:
[2025-05-14 14:30:42]   真データタイプ: text, サイズ: 305バイト
[2025-05-14 14:30:42]   偽データタイプ: text, サイズ: 305バイト
[2025-05-14 14:30:42] チャンク分割完了:
[2025-05-14 14:30:42]   真チャンク数: 5
[2025-05-14 14:30:42]   偽チャンク数: 5
[2025-05-14 14:30:42] 暗号化完了:
[2025-05-14 14:30:42]   真暗号化チャンク数: 5
[2025-05-14 14:30:42]   偽暗号化チャンク数: 5
[2025-05-14 14:30:42] マスク関数を生成中...
[2025-05-14 14:30:42] マスク関数を適用して真偽チャンクを変換中...
[2025-05-14 14:30:42] 暗号文を識別不能な形式に変換中...
[2025-05-14 14:30:42] 暗号化データを保存中: test_output/secure_homomorphic_encrypted.json
[2025-05-14 14:30:42] 暗号化データを保存しました: サイズ=7807バイト
[2025-05-14 14:30:42] 元ファイルのハッシュを保存しました: test_output/secure_homomorphic_sha256.txt
[2025-05-14 14:30:42] ====== 準同型暗号マスキング方式 復号テスト (true鍵) ======
[2025-05-14 14:30:42] 暗号化ファイルを読み込み中: test_output/secure_homomorphic_encrypted.json
[2025-05-14 14:30:42] 暗号化ファイル読み込み完了
[2025-05-14 14:30:42] 鍵タイプ: true鍵
[2025-05-14 14:30:42] true鍵用のデータを抽出中...
[2025-05-14 14:30:42] マスクを除去中...
[2025-05-14 14:30:42] 復号中...
[2025-05-14 14:30:42] 復号後データ先頭: b"W\x1f7@\x85N\xd1\xe3v\xc8\x8c\x08\x06\xae\xfc*s\xdf\x00V\x04B\x06\x85\x9b\xcf\x8e.\x01\xac\xbb\xb0\xc4\x02\x92'\xff\xbb\xe2\x86\xd6\x0bv\x01\x08L\xa7\xf2mN"
[2025-05-14 14:30:42] 復号データを保存中: test_output/secure_homomorphic_true.text
[2025-05-14 14:30:42] 復号データを保存しました: サイズ=305バイト
[2025-05-14 14:30:42] 復号データはテキストではありません（バイナリデータ）
[2025-05-14 14:30:42] ====== 準同型暗号マスキング方式 復号テスト (false鍵) ======
[2025-05-14 14:30:42] 暗号化ファイルを読み込み中: test_output/secure_homomorphic_encrypted.json
[2025-05-14 14:30:42] 暗号化ファイル読み込み完了
[2025-05-14 14:30:42] 鍵タイプ: false鍵
[2025-05-14 14:30:42] false鍵用のデータを抽出中...
[2025-05-14 14:30:42] マスクを除去中...
[2025-05-14 14:30:43] 復号中...
[2025-05-14 14:30:43] 復号後データ先頭: b"!yR\xaa\xb2'\xe1\x08H\x92.\x8f\xae\xf5\xc7\xe7|\xee\xda\xd6\xfb\xf3\xfb\xfa\x84\xe4\xb3\xb7\xf6?\xe7r7>\x99\x9c^\x0bUl\x06\xbbh\xcbMi\xca?Q\xbd"
[2025-05-14 14:30:43] 復号データを保存中: test_output/secure_homomorphic_false.text
[2025-05-14 14:30:43] 復号データを保存しました: サイズ=305バイト
[2025-05-14 14:30:43] 復号データはテキストではありません（バイナリデータ）
[2025-05-14 14:30:43] 検証結果レポートを作成中...
[2025-05-14 14:30:43] 
====== 準同型暗号マスキング方式 検証結果 ======
[2025-05-14 14:30:43] 元の真ファイルハッシュ: 088f5b0bbab0b70a3b992763d4138ad25630fff6853eab15e63602a513139d6a
[2025-05-14 14:30:43] 復号された真ファイルハッシュ: b23471e198197ab90c251e2f4c62709c0919240f4961e78f2bea34a9ff5ed2d9
[2025-05-14 14:30:43] 真ファイル一致: 失敗 ❌
[2025-05-14 14:30:43] 元の偽ファイルハッシュ: b55cd667cee3c8d3b7ba07181912dd974f62b5b9a13a35198a052dcb960bccba
[2025-05-14 14:30:43] 復号された偽ファイルハッシュ: 344ad2f603bbca1e82d594d654d9ef4d61bf16afe01d24fb9f6fab72205ecc14
[2025-05-14 14:30:43] 偽ファイル一致: 失敗 ❌
[2025-05-14 14:30:43] 検証結果グラフを保存しました: test_output/secure_homomorphic_verification.png
[2025-05-14 14:30:43] 
❌ 検証失敗: 暗号化または復号化に問題があります。
[2025-05-14 14:30:43]   - 真の鍵による復号で元の真ファイルが得られませんでした。
[2025-05-14 14:30:43]   - 偽の鍵による復号で元の偽ファイルが得られませんでした。
[2025-05-14 14:30:43] 
準同型暗号マスキング方式 完全検証テスト 完了！処理時間: 0.73秒
[2025-05-14 14:30:43] 詳細ログ: test_output/secure_homomorphic_log_20250514_143042.txt
