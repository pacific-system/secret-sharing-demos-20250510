準同型暗号マスキング方式 統合テスト開始（all）
日時: 2025年05月14日 17:26:06

テスト設定:
- テストタイプ: all
- 出力ディレクトリ: test_output
- 真のテストファイル: ../common/true-false-text/t.text
- 偽のテストファイル: ../common/true-false-text/f.text
- 鍵サイズ: 1024ビット
- チャンクサイズ: 64バイト

## テスト環境情報
- Python バージョン: 3.12.8 (v3.12.8:2dc476bcb91, Dec  3 2024, 14:43:20) [Clang 13.0.0 (clang-1300.0.29.30)]
- OS: posix
- ワーキングディレクトリ: /Users/dev/works/VSCode/secret-sharing-demos-20250510/method_8_homomorphic


================================================================================
# 準同型暗号の基本機能テスト
================================================================================


## テストファイルの読み込み
[2025-05-14 17:26:06] テストファイル読み込み完了:
[2025-05-14 17:26:06]   真テキストサイズ: 300バイト
[2025-05-14 17:26:06]   偽テキストサイズ: 300バイト

## 暗号化処理
[2025-05-14 17:26:06] 準同型暗号システムを初期化中...
[2025-05-14 17:26:06] 公開鍵生成完了: n=91039226975715021077104329210641145752376605707230615203371268258329665378105543036426402767192098490986193767980501161820709371251394062680693098085848766319780223923239912496851404227958713368661506709410586088756004438739293557503669971581373086460550784976224818949843780975591564037083927623024007236771, g=91039226975715021077104329210641145752376605707230615203371268258329665378105543036426402767192098490986193767980501161820709371251394062680693098085848766319780223923239912496851404227958713368661506709410586088756004438739293557503669971581373086460550784976224818949843780975591564037083927623024007236772
[2025-05-14 17:26:06] 真偽判別用の鍵を生成中...
[2025-05-14 17:26:06] 鍵生成完了:
[2025-05-14 17:26:06]   真鍵: d4faaa7234ba1a334a18616504b541c9e606fdb54cbd79af348d94b0d7fa7154
[2025-05-14 17:26:06]   偽鍵: ef5dbcc9960b9ca73633efef99dadad80cd2561ab181332c09c9ad97df2370b1
[2025-05-14 17:26:06] データを前処理中...
[2025-05-14 17:26:06] 前処理完了:
[2025-05-14 17:26:06]   真データタイプ: text, サイズ: 429バイト
[2025-05-14 17:26:06]   偽データタイプ: text, サイズ: 429バイト
[2025-05-14 17:26:06] チャンク分割完了:
[2025-05-14 17:26:06]   真チャンク数: 7
[2025-05-14 17:26:06]   偽チャンク数: 7
[2025-05-14 17:26:06] 真データ暗号化中: 1/7
[2025-05-14 17:26:06] 真データ暗号化中: 6/7
[2025-05-14 17:26:06] 偽データ暗号化中: 1/7
[2025-05-14 17:26:06] 偽データ暗号化中: 6/7
[2025-05-14 17:26:06] 暗号化完了:
[2025-05-14 17:26:06]   真暗号化チャンク数: 7
[2025-05-14 17:26:06]   偽暗号化チャンク数: 7
[2025-05-14 17:26:06] マスク関数を生成中...
[2025-05-14 17:26:06] マスク関数を適用して真偽チャンクを変換中...
[2025-05-14 17:26:06] 暗号文を識別不能な形式に変換中...
[2025-05-14 17:26:06] 暗号化データを保存中: test_output/basic_test/encrypted_20250514-172606.json
[2025-05-14 17:26:06] 暗号化データを保存しました: サイズ=9886バイト

## 真鍵での復号
[2025-05-14 17:26:06] 真鍵用のデータを抽出中...
[2025-05-14 17:26:06] マスクを除去中...
[2025-05-14 17:26:06] 復号中...
[2025-05-14 17:26:06] 真鍵での復号中: 1/7
[2025-05-14 17:26:06] 真鍵での復号中: 6/7
[2025-05-14 17:26:06] 真鍵データの後処理中... データタイプ: text
[2025-05-14 17:26:06] 真鍵での復号データを保存中: test_output/basic_test/decrypted_true_20250514-172606.txt

## 偽鍵での復号
[2025-05-14 17:26:06] 偽鍵用のデータを抽出中...
[2025-05-14 17:26:06] マスクを除去中...
[2025-05-14 17:26:06] 復号中...
[2025-05-14 17:26:06] 偽鍵での復号中: 1/7
[2025-05-14 17:26:06] 偽鍵での復号中: 6/7
[2025-05-14 17:26:06] 偽鍵データの後処理中... データタイプ: text
[2025-05-14 17:26:06] 偽鍵での復号データを保存中: test_output/basic_test/decrypted_false_20250514-172606.txt

## 復号結果の検証
[2025-05-14 17:26:06] 真ファイルのハッシュ比較: False
[2025-05-14 17:26:06]   元のハッシュ:   088f5b0bbab0b70a3b992763d4138ad25630fff6853eab15e63602a513139d6a
[2025-05-14 17:26:06]   復号後のハッシュ: d71e2a9208426741743e272a1dddc6fac18b053355acb6e849ebace1af53710a
[2025-05-14 17:26:06] 偽ファイルのハッシュ比較: False
[2025-05-14 17:26:06]   元のハッシュ:   b55cd667cee3c8d3b7ba07181912dd974f62b5b9a13a35198a052dcb960bccba
[2025-05-14 17:26:06]   復号後のハッシュ: 5c286429f456a3a17fdc7e13108e1ce0f9984522f663852321add3569430a0ec
[2025-05-14 17:26:06] テスト結果: 失敗

================================================================================
# マスク関数テスト
================================================================================


## 準同型暗号の初期化
[2025-05-14 17:26:06] 公開鍵生成完了: n=115703223163209660081043706167298813009537156061647654429794553447135588433666992179983328445787140758776735173403845957556825348912823545016701651125769584938467433008455663768315049670264337870133287630148199818088255507335200739232901676672936811604393643577129911517590203020111569272179688979605750608129, g=115703223163209660081043706167298813009537156061647654429794553447135588433666992179983328445787140758776735173403845957556825348912823545016701651125769584938467433008455663768315049670264337870133287630148199818088255507335200739232901676672936811604393643577129911517590203020111569272179688979605750608130

## 基本マスク関数テスト
[2025-05-14 17:26:06] 基本マスク関数を生成しました
[2025-05-14 17:26:06]   真マスク: {'type': 'true_mask', 'params': {'additive': [1381444343, 2694978962, 2980338279, 18249741], 'multiplicative': [2973182461, 3859587318, 2769272936, 4240845285]}, 'seed': 'djxVa38yBS9AKD1HjYQLyJj0q+EW/0trm2V4JJ2qBpU='}
[2025-05-14 17:26:06]   偽マスク: {'type': 'false_mask', 'params': {'additive': [944231868, 1403159963, 2036128878, 1896556503], 'multiplicative': [2071473496, 775343848, 3755022023, 1395544202]}, 'seed': 'djxVa38yBS9AKD1HjYQLyJj0q+EW/0trm2V4JJ2qBpU='}
[2025-05-14 17:26:06] エラーが発生しました: 'int' object is not iterable
[2025-05-14 17:26:06] Traceback (most recent call last):
  File "/Users/dev/works/VSCode/secret-sharing-demos-20250510/method_8_homomorphic/homomorphic_test.py", line 637, in test_masking_functions
    masked_message_true = basic_mask_gen.apply_mask(encrypted_message, true_mask)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/dev/works/VSCode/secret-sharing-demos-20250510/method_8_homomorphic/crypto_mask.py", line 355, in apply_mask
    for i, chunk in enumerate(encrypted_chunks):
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'int' object is not iterable


================================================================================
# セキュリティ特性テスト
================================================================================


## 暗号文識別不能性テスト
[2025-05-14 17:26:06] 暗号化テスト 1/3 を実行...
[2025-05-14 17:26:07] 暗号化ファイル 1 のハッシュ: 0fcdda18db8bafd4...
[2025-05-14 17:26:07] 暗号化テスト 2/3 を実行...
[2025-05-14 17:26:07] 暗号化ファイル 2 のハッシュ: c1b55782cd5a9a07...
[2025-05-14 17:26:07] 暗号化テスト 3/3 を実行...
[2025-05-14 17:26:07] 暗号化ファイル 3 のハッシュ: 52aca83a78355aac...
[2025-05-14 17:26:07] 暗号文識別不能性テスト: 合格
[2025-05-14 17:26:07]   3回の暗号化で得られたユニークなハッシュ数: 3

## 鍵解析テスト
[2025-05-14 17:26:07] テスト鍵生成:
[2025-05-14 17:26:07]   真鍵: b9c39db8f2aaaeff...
[2025-05-14 17:26:07]   偽鍵: 6c2fd78cc7d3fc63...
[2025-05-14 17:26:07] 鍵解析テスト:
[2025-05-14 17:26:07]   真鍵の解析結果: false
[2025-05-14 17:26:07]   偽鍵の解析結果: false
[2025-05-14 17:26:09] 鍵解析結果分布（50サンプル）:
[2025-05-14 17:26:09]   真鍵と判定: 16 (32.0%)
[2025-05-14 17:26:09]   偽鍵と判定: 34 (68.0%)
[2025-05-14 17:26:09]   その他の判定: 0 (0.0%)
[2025-05-14 17:26:09] 鍵解析分布テスト: 不合格
[2025-05-14 17:26:09]   分布バランス: 0.360
[2025-05-14 17:26:09] 鍵分布グラフを保存しました: test_output/security_test/key_distribution_20250514-172606.png

## タイミング攻撃耐性テスト
[2025-05-14 17:26:09] タイミング攻撃耐性テストでエラーが発生しました: 'int' object is not iterable

================================================================================
# パフォーマンステスト
================================================================================


## 鍵生成パフォーマンス
[2025-05-14 17:26:09] 512ビット鍵の生成時間を測定...
[2025-05-14 17:26:09]   512ビット鍵の生成時間: 0.007747秒
[2025-05-14 17:26:09] 1024ビット鍵の生成時間を測定...
[2025-05-14 17:26:09]   1024ビット鍵の生成時間: 0.069108秒
[2025-05-14 17:26:09] 2048ビット鍵の生成時間を測定...
[2025-05-14 17:26:09]   2048ビット鍵の生成時間: 0.289714秒

## 暗号化パフォーマンス（サイズ別）
[2025-05-14 17:26:09] 100バイトのデータで暗号化時間を測定...
[2025-05-14 17:26:09]   100バイト暗号化時間: 0.051311秒
[2025-05-14 17:26:09] 1000バイトのデータで暗号化時間を測定...
[2025-05-14 17:26:10]   1000バイト暗号化時間: 0.414764秒
[2025-05-14 17:26:10] 10000バイトのデータで暗号化時間を測定...
[2025-05-14 17:26:14]   10000バイト暗号化時間: 4.071381秒

## 復号パフォーマンス（サイズ別）
[2025-05-14 17:26:18] 100バイトのデータで復号時間を測定...
[2025-05-14 17:26:18]   100バイト復号時間: 0.054082秒
[2025-05-14 17:26:18] 1000バイトのデータで復号時間を測定...
[2025-05-14 17:26:18]   1000バイト復号時間: 0.432778秒
[2025-05-14 17:26:18] 10000バイトのデータで復号時間を測定...
[2025-05-14 17:26:23]   10000バイト復号時間: 4.277756秒

## スケーリング特性
[2025-05-14 17:26:23] 鍵サイズ 512ビット, データサイズ 1000バイトのスケーリングテスト...
[2025-05-14 17:26:23]   暗号化時間: 0.041569秒, 復号時間: 0.027548秒
[2025-05-14 17:26:23] 鍵サイズ 1024ビット, データサイズ 1000バイトのスケーリングテスト...
[2025-05-14 17:26:23]   暗号化時間: 0.200646秒, 復号時間: 0.173576秒

## パフォーマンスグラフ生成
[2025-05-14 17:26:24] パフォーマンスグラフを保存しました: test_output/performance_test/performance_graph_20250514-172623.png
[2025-05-14 17:26:24] パフォーマンスデータを保存しました: test_output/performance_test/performance_data_20250514-172623.json

================================================================================
# テスト結果レポートの生成
================================================================================

[2025-05-14 17:26:24] テスト結果レポートを保存しました: test_output/homomorphic_test_report_20250514-172624.md
## テスト完了
- 合計実行時間: 18.12秒
- テスト結果レポート: test_output/homomorphic_test_report_20250514-172624.md
- 成功したテスト: 1/4
### 一部のテストが失敗しました ❌
